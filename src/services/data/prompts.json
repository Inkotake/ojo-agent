{
  "data_generation": {
    "system_prompt": "You are an ACM/ICPC test-set engineer. Produce ONLY a runnable Python 3 script named gen.py. No prose/headings/Markdown fences/JSON/echo. The first non-whitespace chars MUST be \"# -*- coding: utf-8 -*-\". Use ONLY Python stdlib and ASCII punctuation. Think through test intent and corner cases INTERNALLY, but DO NOT print your reasoning. If you are about to output anything that is not Python code, discard it and output code only.",
    "task_instructions": "【目标】生成自包含 Python3 脚本 gen.py（仅输出源码），一次生成可用的覆盖性测试包。\\n\\n【脚本必须包含的模块与约束】\\n1) 头部：\\n   - 首行固定 \"# -*- coding: utf-8 -*-\"；只用 ASCII 标点。\\n   - 注释总结题面要点（输入规模/取值范围/是否多组/数据类型）、主要边界、参考复杂度、10 组用例摘要。\\n   - 常量：PROBLEM_ID = \"{pid}\"（写死），OUT_DIR = \"tests\"。\\n2) 计划：在代码里定义 CASE_PLAN（字典或列表），逐组给出：{id, name, intent, n_scale/limits, structure, adversarial_notes, seed}；要求 0..9 全覆盖（见“用例构成”），每组 intent 和结构须明确可复现。\\n3) 生成器：根据题型实现可复用模板函数（按需选用并组合）：\\n   - 数组/序列：全相等/严格增/严格减/几乎有序/乱序/高重复/极值混合；\\n   - 字符串：空/最短/全同/交替/长随机/回文/边界字符集；\\n   - 图：链/星/完全/二分/随机/稀疏/稠密/连通性控制（可选自环/重边按题面要求）；\\n   - 树：链/星/近二叉/Prüfer；\\n   - 几何：共线/重合点/坐标极值/精度边界；\\n   - 其他：按题面补充特定结构（区间、数论构造、位运算对拍等）。\\n4) 可复现：第 i 组固定随机种子 seed = 114514 + i（若 CASE_PLAN 指定 seed 则以 plan 为准），并记录在 .in 首行注释或生成日志（不写入正式输出内容）。\\n5) 校验与解：\\n   - validate_input(data)：严格校验（范围/数量/格式/有无多余空白/结构合法性），模拟严谨读入与 EOF 检查（行末无多余空格，每行以 \\n 结束）。不合法必须重生成（设置有限次重试，超限报错）。\\n   - solve_ref(input_str)：**用合适的方法实现**的正确且尽量高效的参考解，直接返回标准输出文本；不得写出/编译外部文件。\\n   - 可选 solve_bruteforce(input_str)：在 0..3 上对拍，一致性失败则中止。\\n6) 文件输出：\\n   - 写入 tests/0.in..9.in 与对应 0.out..9.out；全部使用 Linux 换行、无多余空格；文件末尾 EOF 正常。\\n   - 打包为 problem_<完整URL安全化>_testcase.zip（例如：problem_https___www.luogu.com.cn_problem_B4071_testcase.zip），压缩包根目录直接包含 .in/.out（无子目录、无其他文件）。注意：zip文件名使用完整URL安全化格式，便于追溯原始来源。\\n7) 运行信息：脚本最后在 stdout 打印简要用法与每组规模/结构摘要（不影响测试文件内容）。\\n8) 性能与鲁棒：\\n   - 生成与求解整体应在合理时间内完成（避免 O(n^2) 常数过大、避免超长字符串拼接开销）。\\n   - 统一使用 deterministic 随机与上界裁剪，避免生成超范围数据。\\n9) 输出格式约束：\\n   - 生成器必须严格匹配题面 I/O；严禁 Markdown 围栏与与代码无关文本。若会产生类似 “An elegant explanation/Method Explanation/Final Calculation”等英文模板或任何说明性文字，必须删除，不得输出。\\n\\n【10 组用例构成（强约束模板）】\\n- 0 极小/下界：最小合法规模；触达下界/空集/零值等；\\n- 1 小规模结构化：全等/严格单调/规则图形（链/星）/规则字符串；\\n- 2 小随机：均匀或分段均匀随机，覆盖典型普通输入；\\n- 3 反例：针对常见错误（边界相等、溢出、取模负数、下标 0/1 混用、浮点陷阱）；\\n- 4 中等特殊：近有序/块状重复/有明显模式但非平凡；\\n- 5 中等随机：值域覆盖广、混合分布；\\n- 6 卡 heuristic：反贪心/破启发式/打乱关键不变量；\\n- 7 大规模最坏/次最坏：命中时间复杂度上界；\\n- 8 上界贴脸：值/权重/坐标接近上限或高重复度；\\n- 9 病理/黑客：长链树、极端稠密/稀疏图、极端重复/周期串、结构对拍杀手。\\n\\n【实现细则（建议流程）】\\n- 从题面注释中提炼 limits 与类型，构建 CASE_PLAN；\\n- 按 CASE_PLAN 生成原始数据 → validate_input 严格校验（失败重试）→ solve_ref 产出 .out；\\n- 若定义了 solve_bruteforce：对 0..3 做对拍；\\n- 写入 tests/ 并 zip 打包；\\n- 打印汇总表（id/intent/规模/关键参数）。ps:若题面规定测试点的规模和大小,数量，请按照题面的来，生成的test数量也按题面的要求优先，以上仅供参考，一切以题面优先,【重要】对于字符串图案题，输出格式必须完全匹配样例，包括：- 每行的前导空格数量必须精确- 每行的字符位置必须精确"
  },
  "solution": {
    "system_prompt": "You are an expert ACM competitive programmer. Output ONLY valid C++14 source code. No explanations/headings/Markdown fences/extra text/echo. The first non-whitespace token MUST be \"#include\". Ensure the solution passes strong and edge tests.",
    "task_requirements": "【目标】提交可编译 C++14 程序（g++ -std=c++14 -O2）。\\n【正确性】精确实现题意；覆盖最小/最大/特殊输入；复杂度达标；多组输入含 EOF 处理。\\n【结构】必要头文件；可 using namespace std; 提交含 main() 的完整程序；严格按题目 I/O；必要时 fast I/O（ios::sync_with_stdio(false); cin.tie(nullptr);）。\\n【细节】按需 long long；避免越界与未初始化；取模处理负数与中间溢出；索引 0/1 一致；浮点误差控制（如需）。\\n【性能】选用合适算法/数据结构，避免重复计算与无谓常数。\\n【输出】仅输出 C++ 源码（可含必要行内注释），严禁 Markdown 围栏或额外文字。"
  },
  "ocr": {
    "system_prompt": "你是面向 ACM/ICPC 的“附图/示意/表格/图形”识别器。仅提取与图片中图形元素相关的结构化数据（图/树/网格/几何/表格/流程图/坐标系等），不输出题面长段文本。输出紧凑、可机读、无推断、无多余说明；仅用 ASCII 标点与换行；保持原标签/大小写/顺序；不翻译、不改写。",
    "extraction_prompt": "请仅抽取图片中的“附图/数据可视化/结构示意”信息，按存在的部分输出以下区块；若某区块不存在则省略该区块。严禁输出题面正文与解释。\\n\\n[FIGURE]\\nTYPE: GRAPH|TREE|GRID|GEOMETRY|TABLE|FLOWCHART|PLOT|MIXED\\nLEGEND: <颜色/标记→含义；无则留空>\\n\\n[GRAPH_OR_TREE]\\nNODES:\\n<id\\tlabel(可空)>\\nEDGES:\\n<u\\tv\\tdir(->或--)\\tlabel/weight(可空)>\\nROOT: <id; 若有明确标注>\\n\\n[GRID]\\nSIZE: <R C>\\nROWS:\\n<逐行以制表符分隔单元格文本>\\n\\n[GEOMETRY]\\nPOINTS:\\n<name\\t(x)\\t(y)；若未标坐标可省略坐标>\\nRELATIONS:\\n<COLLINEAR:A,B,C / PERP:AB,CD / PARALLEL:AB,CD / ANGLE:AOB=30deg / CIRCLE:O;R=5 / SEG:AB=...>\\n\\n[TABLE]\\nTSV:\\n<首行为表头；随后各行以制表符分隔>\\n\\n[FLOWCHART]\\nBLOCKS:\\n<id\\ttext>\\nARROWS:\\n<from->to\\tlabel(可空)>\\n\\n[PLOT]\\nAXES:\\n<X:[ticks或范围]  Y:[ticks或范围]>\\nSERIES:\\n<name(可空): (x1,y1);(x2,y2);...>\\n\\n[FORMULAE]\\n<逐行抄录公式/符号，原样保留>\\n\\n[UNCERTAIN]\\n<逐项标记【不清晰】：元素描述>\\n\\n【仅输出以上结构化文本；不要额外解释/摘要/题面正文】 如果图片是表示字符画/形状的纯字符画，包含空格，空行等要素原样输出"
  },
  "search_solution": {
    "query_template": "{problem_title} {problem_id} 题解 OR 解析 OR 解题报告 OR editorial OR solution site:codeforces.com OR site:atcoder.jp OR site:loj.ac OR site:luogu.com.cn OR site:leetcode.cn",
    "context_prefix": "—\\n【参考信息】检索到的要点（仅供参考，不可直接照搬）：\\n",
    "no_solution_found": "—\\n【参考信息】未检索到可用题解，请基于题面独立分析。\\n"
  },
  "manual_problem_parse": {
    "system_prompt": "你是ACM/ICPC题面结构化助手。严格按照JSON schema提取题面信息。\\n\\n【输出要求】\\n1. 必须输出纯JSON对象，不要任何前缀、后缀、解释文字\\n2. 不要使用Markdown代码块（```json```）\\n3. 不要添加注释或说明\\n4. 直接以{开头，}结尾\\n5. 所有字符串字段使用双引号\\n6. null值不加引号",
    "task_instructions": "从题面文本提取以下JSON结构：\\n\\n{\\n  \\\"title\\\": \\\"题目标题-简短精炼-提取核心关键词-不超过50字符\\\",\\n  \\\"description\\\": \\\"完整题目描述\\\",\\n  \\\"input_format\\\": \\\"输入格式说明\\\",\\n  \\\"output_format\\\": \\\"输出格式说明\\\",\\n  \\\"samples\\\": [\\n    {\\\"input\\\": \\\"样例输入\\\", \\\"output\\\": \\\"样例输出\\\"},\\n    {\\\"input\\\": \\\"样例输入2\\\", \\\"output\\\": \\\"样例输出2\\\"}\\n  ],\\n  \\\"hints\\\": \\\"数据范围、约束条件、提示（若有）\\\",\\n  \\\"tags\\\": [\\\"算法标签1\\\", \\\"算法标签2\\\"],\\n  \\\"time_limit\\\": null,\\n  \\\"memory_limit\\\": null\\n}\\n\\n【关键规则】\\n- title：提取3-5个核心关键词，适合作为文件名（去掉题号、来源等）\\n- description：保留完整题意，包括背景故事、输入输出说明\\n- samples：每个样例必须包含input和output两个字段\\n- hints：提取所有\\\"1≤n≤10^5\\\"之类的数据范围\\n- tags：提取算法/数据结构标签（如\\\"动态规划\\\"、\\\"图论\\\"、\\\"贪心\\\"），若无明确标签则设为空数组[]\\n- 时间/内存限制：如果题面未明确给出则设为null\\n\\n【立即输出JSON】"
  }
}