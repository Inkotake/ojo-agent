# OJO 用户使用指南

## 目录
- [快速开始](#快速开始)
- [功能概览](#功能概览)
- [任务管理](#任务管理)
- [题单管理](#题单管理)
- [LLM配置](#llm配置)
- [文本清洗](#文本清洗)
- [常见问题](#常见问题)

---

## 快速开始

### 1. 启动服务

```bash
# Windows
.\start_all.bat

# Linux/macOS
./start_all.sh
```

### 2. 访问界面

打开浏览器访问: `http://localhost:8000`

### 3. 登录

- 默认管理员账号: `admin`
- 默认密码: `admin123`

> ⚠️ **重要**: 首次登录后请立即修改密码

---

## 功能概览

### 普通用户功能
| 功能 | 路径 | 说明 |
|-----|------|------|
| 仪表盘 | `/dashboard` | 查看系统状态和统计 |
| 任务中心 | `/tasks` | 批量处理题目 |
| API用量 | `/usage` | 查看API调用统计 |
| 适配器 | `/adapters` | 配置OJ平台适配器 |
| 设置 | `/settings` | 个人设置 |

### 管理员专属功能
| 功能 | 路径 | 说明 |
|-----|------|------|
| 管理面板 | `/admin` | 用户和系统管理 |
| 题单管理 | `/training` | 创建和管理题单 |
| LLM配置 | `/llm-config` | 配置大语言模型 |
| 文本清洗 | `/wash` | 清洗敏感信息 |

---

## 任务管理

### 添加任务

#### 方式1: 手动输入
在"批量输入"区域，每行输入一个题目ID或URL：
```
1001
1002
2000-2005
https://oj.aicoders.cn/problem/2772
```

#### 方式2: 批量添加
点击"批量添加"按钮，支持：
- **按标签**: 从SHSOJ按标签获取题目
- **按范围**: 输入起始和结束ID
- **手动输入**: 粘贴多个URL

#### 方式3: 粘贴题面
点击"粘贴题面"按钮，直接粘贴题目内容，系统自动解析。

### 模块选择

| 模块 | 说明 |
|-----|------|
| 📥 拉取 | 从源OJ获取题面 |
| ⚙️ 生成 | LLM生成测试数据 |
| 📤 上传 | 上传到目标OJ |
| 🔍 求解 | LLM生成解题代码 |

### 预设模式
- **完整流程**: 拉取 → 生成 → 上传 → 求解
- **只生成**: 仅生成测试数据
- **只上传**: 仅上传已生成的数据

### 任务操作
每个任务行右侧有操作菜单：
- 👁️ 查看日志
- 📥 下载工作区
- 📋 复制题目ID
- 🔄 重试特定模块
- ❌ 取消任务

---

## 题单管理

> 仅管理员可用

### 创建题单
1. 进入 `/training` 页面
2. 点击"创建题单"
3. 填写标题和描述
4. 可选添加初始题目
5. 点击"创建"

### 添加题目
1. 在左侧列表选择题单
2. 在右侧"添加题目"区域输入题目ID
3. 每行一个ID
4. 点击"添加题目"

### 删除题单
1. 选择题单
2. 点击"删除题单"
3. 确认删除

---

## LLM配置

> 仅管理员可用

### 任务分配
为不同任务类型选择LLM提供商：
- **OCR识别**: 图片文字识别 (推荐: Gemini)
- **数据生成**: 生成测试数据 (推荐: DeepSeek)
- **代码求解**: 生成解题代码 (推荐: DeepSeek)
- **结果总结**: 生成执行摘要 (推荐: DeepSeek)

### API Keys
配置各提供商的API密钥：
- DeepSeek API Key
- Gemini API Key
- OpenAI API Key
- SiliconFlow API Key

> 💡 点击"测试"按钮验证API密钥是否有效

### 参数设置
- **Temperature**: 0.0(精确) ~ 1.0(创造性)
- **并发数**: 同时处理的LLM请求数量
- **超时时间**: 单次请求超时秒数

### 网络设置
- **启用代理**: 通过代理访问LLM API
- **代理地址**: 如 `http://127.0.0.1:7890`
- **SSL验证**: 是否验证HTTPS证书

---

## 文本清洗

> 仅管理员可用

### 功能说明
批量清洗SHSOJ题目中的敏感信息，如：
- 地名 (上海市、学校名等)
- 人名、班级、学号
- 联系方式 (电话、邮箱等)

### 使用步骤
1. 输入题目ID (每行一个)
2. 选择要清洗的字段
3. 可选自定义敏感词
4. 点击"预览"查看效果
5. 确认后点击"执行清洗"

### 注意事项
- ⚠️ 清洗操作会直接修改OJ平台题目
- 建议先预览确认效果
- 批量清洗有速率限制

---

## 常见问题

### Q: 无法连接到服务器？
1. 检查服务是否启动
2. 检查端口8000是否被占用
3. 查看日志文件 `logs/app.log`

### Q: 任务一直卡在"Pending"？
1. 检查适配器配置是否正确
2. 检查网络连接
3. 查看任务日志获取详细错误

### Q: LLM生成失败？
1. 检查API Key是否正确
2. 检查网络/代理设置
3. 尝试降低并发数
4. 查看日志获取具体错误

### Q: 上传失败？
1. 检查目标OJ的Cookie/Token是否有效
2. 检查适配器配置
3. 确认题目ID格式正确

### Q: WebSocket连接断开？
- 系统会自动重连 (最多10次)
- 刷新页面可强制重连
- 检查网络稳定性

---

## 快捷键

| 快捷键 | 功能 |
|-------|------|
| `Ctrl+/` | 打开快捷键帮助 |
| `Ctrl+K` | 快速搜索 |
| `Esc` | 关闭对话框 |

---

## 技术支持

如遇问题，请查看：
- 日志文件: `logs/app.log`
- 问题日志: `problem_log/`
- GitHub Issues

---

*最后更新: 2024-12-22*
